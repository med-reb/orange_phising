const S=t=>new Promise(s=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t(s)})})});let L={easing:"ease",duration:250,fill:"backwards",display:"block",overflow:"hidden"},T=["overflow","display"],C=(t,s)=>{let r=Object.assign({},L,s),y=r.display,p="none",u=e=>t.style.display=e,n=()=>t.clientHeight+"px",k=()=>window.getComputedStyle(t),g=e=>t.style.overflow=e?r.overflow:"",b=()=>t.getAnimations(),A=(e,i)=>{var a;T.forEach(m=>delete r[m]);let h=n(),f=[h,i].map(m=>({height:m,paddingTop:"0px",paddingBottom:"0px"})),{paddingTop:w,paddingBottom:x}=k();f[0].paddingTop=w,f[0].paddingBottom=x,e&&(f[0].height=h,f.reverse()),(a=window.matchMedia("(prefers-reduced-motion: reduce)"))!=null&&a.matches&&(r.duration=0);let v=t.animate(f,r);return v.id=(+e).toString(),v},l=async e=>{let i=b().map(a=>a.finish());return await S(async a=>{let h=e?n():"0px";e&&u(y),g(!0),await A(e,h).finished,g(!1),e||u(p),a()}),i.length?null:e},c=async()=>l(!1),d=async()=>l(!0);return{up:c,down:d,toggle:async()=>{var e;let i=(e=b()[0])==null?void 0:e.id;return((i?i==="1":t.offsetHeight)?c:d)()}}},H=(t,s={})=>C(t,s).down(),q=(t,s={})=>C(t,s).up();((t,s,r)=>{t.Collapsiblock=t.Collapsiblock||{},t.behaviors.collapsiblock={attach:(y,p)=>{const u=s.get("collapsiblock"),n=u?JSON.parse(u):{},k=p.collapsiblock.active_pages,g=parseInt(p.collapsiblock.slide_speed,10),b=p.collapsiblock.cookie_lifetime;r("collapsiblock",document.querySelectorAll(".collapsiblockTitle")).forEach(l=>{if(l.children.length===0||l.children.length===l.querySelectorAll(".visually-hidden").length)return;const c=parseInt(l.dataset.collapsiblockAction,10);if(c===1)return;const d=c===2||c===3;let o=l.nextElementSibling;for(;o&&o.hasAttribute("data-contextual-id");)o=o.nextElementSibling;if(!o)return;const e=l.id.split("-").pop();l.innerHTML=`<button id="#collapse-${e}" aria-controls="collapse-${e}-content">${l.innerHTML}</button>`,o.classList.add(["collapsiblockContent"]),o.setAttribute("id",`collapse-${e}-content`);const i=document.getElementById(`#collapse-${e}`);if(l.addEventListener("click",()=>{l.classList.contains("collapsiblockTitleCollapsed")?(l.classList.remove("collapsiblockTitleCollapsed"),o.classList.remove("collapsiblockContentCollapsed"),H(o,{duration:g}),i.setAttribute("aria-expanded",!0),d&&(n[e]=1)):(l.classList.add("collapsiblockTitleCollapsed"),o.classList.add("collapsiblockContentCollapsed"),q(o,{duration:g}),i.setAttribute("aria-expanded",!1),d&&(n[e]=0));const a={path:drupalSettings.path.baseUrl};b&&(a.expires=parseFloat(b)),s.set("collapsiblock",JSON.stringify(n),a)}),c===4||c===3&&n[e]===void 0||d&&n[e]===0){if(o.querySelectorAll("a.is-active").length>0&&!k||o.classList.contains("collapsiblock-force-open")||o.querySelectorAll(".collapsiblock-force-open").length>0){i.setAttribute("aria-expanded",!0);return}l.classList.add("collapsiblockTitleCollapsed"),o.classList.add("collapsiblockContentCollapsed"),o.style.display="none",i.setAttribute("aria-expanded",!1)}else i.setAttribute("aria-expanded",!0)})}}})(Drupal,window.Cookies,once);
